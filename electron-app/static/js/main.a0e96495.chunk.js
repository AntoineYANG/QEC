(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(7),i=n.n(o),c=(n(14),n(15),n(3)),l=n(2),s=n(5),u=n(4),m=function(e){return r.a.createElement("div",{title:e.name,className:"windowbutton",onClick:e.trigger},r.a.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 100 100"},r.a.createElement("path",{d:e.path})))},d=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={},a}return Object(l.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"header"},r.a.createElement("div",{key:"left",className:"header-strip"},r.a.createElement("label",{key:"icon",className:"header-item",style:{width:"16.1px",height:"16.1px",margin:"0 7px",display:"inline-block",transform:"translateY(-2px)",fontWeight:"bold",fontSize:"119%"}},"Z"),r.a.createElement("label",{key:"filename",className:"header-btn-groups",style:{height:"16.1px",display:"inline-block",transform:"translateY(1.8px)",margin:"0 2em",width:"35vw",overflow:"hidden",textOverflow:"ellipsis"}},"Start with new file")),r.a.createElement("div",{key:"right",className:"header-btn-groups"},r.a.createElement(m,{key:"minimize",name:"minimize",path:"M28,50 L72,50",trigger:function(){}}),r.a.createElement(m,{key:"maximize",name:"unmaximize",path:"M30,34 L70,34 L70,69 L30,69 Z",trigger:function(){}}),r.a.createElement(m,{key:"close",name:"close",path:"M32,32 L68,68 M32,68 L68,32",trigger:function(){}})))}},{key:"componentDidMount",value:function(){}}]),n}(a.Component),h=n(1),f=n.n(h),p={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",186:";",187:"+",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},v=[],y=function(){return v.map((function(e){return e[0]})).join("+")},g={},b=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=t.join("+");return(void 0===g[e][r]||g[e][r][1]<a)&&(g[e][r]=[n,a],!0)},x=function(e,t){var n=t.join("+");g[e][n]=void 0},k=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];f()(e)[0].tabIndex=1,f()(e)[0].addEventListener("keydown",(function(e){var n=p[e.which];("tab"===n||t&&n)&&e.preventDefault(),v.length&&v[v.length-1][0]===n||v.push([n,!0])})),f()(e)[0].addEventListener("keyup",(function(n){var a=p[n.which];if(t&&n.preventDefault(),a){var r=g[e][y()];r&&r[0]();for(var o=v.length-1;o>=0;o--)if(v[o][0]===a&&v[o][1]){if(o===v.length-1){for(var i=[],c=!0,l=o-1;l>=0;l--)c&&!v[l][1]||(i.push(v[l]),c=!1);v=i.reverse()}else v[o][1]=!1;break}}})),g[e]={}};k("body"),window.onblur=function(){v=[]},window.onfocus=function(){v=[]};var w=n(8),I=window.require("electron").ipcRenderer,E={op:{params:[{name:"filename",description:"the file you want to open",autoComplete:function(e){if(e){var t=I.sendSync("synchronous-message","close");console.log(e,t)}return[]}}],args:[{name:"-e",requireValue:!1,description:"reject if the file does not exist"},{name:"-clear",requireValue:!1,description:"clear the file if it has already exist"}],description:"Open or create a file to edit.",execute:function(e){}},opdir:{params:[{name:"foldername",description:"the folder you want to open",autoComplete:function(e){return[]}}],args:[],description:"Open a folder to edit.",execute:function(e){}},opwsp:{params:[{name:"filename",description:"the workspace you want to open",autoComplete:function(e){return[]}}],args:[],description:"Open a workspace to edit.",execute:function(e){}}},D=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={active:!1,x:200,y:200,list:[],currentParam:null,focusIdx:0},a}return Object(l.a)(n,null,[{key:"getRef",value:function(){return n.currentRef}},{key:"show",value:function(e,t,a){if(n.currentRef)if(e.includes(" ")){var r=e.split(" ")[0];if(E[r]){var o,i=0,c=null,l=!1;e.split(/ {1,}/).slice(1).forEach((function(e){var t=E[r].args.filter((function(t){return t.name===e}));t.length?(c=e,l=t[0].requireValue):l?l=!1:(i+=1,c=null)})),n.currentRef.setState({list:[r],currentParam:null!==(o=c)&&void 0!==o?o:i,active:!0,x:t||n.currentRef.state.x,y:a||n.currentRef.state.y})}else n.currentRef.setState({list:[],currentParam:null,active:!1})}else{var s=new RegExp(e.split("").join(".*"));n.currentRef.setState({list:Object.keys(E).filter((function(e){return s.test(e)})),currentParam:null,active:!0,x:t||n.currentRef.state.x,y:a||n.currentRef.state.y})}}},{key:"hide",value:function(){n.currentRef&&n.currentRef.setState({active:!1})}}]),Object(l.a)(n,[{key:"render",value:function(){var e=this,t=E[this.state.list[this.state.focusIdx]],n="";return t&&null!==this.state.currentParam&&("string"===typeof this.state.currentParam?n=t.args.filter((function(t){return t.name===e.state.currentParam}))[0].description:t.params.length>this.state.currentParam-1&&(n=t.params[this.state.currentParam-1].description)),r.a.createElement("div",{style:{zIndex:1e4,position:"fixed",left:this.state.x,bottom:f()(window).innerHeight()-this.state.y,pointerEvents:"none",display:this.state.active&&this.state.list.length?"flex":"none",flexDirection:"column"}},t?r.a.createElement("div",{key:"detail",style:{color:"rgb(64,172,225)",border:"1px solid rgb(91,95,97)",borderBottom:"none",padding:"0.3em 0.7em",width:"32.6em",background:"rgb(26,29,33)"}},r.a.createElement("label",null,r.a.createElement("span",{key:"name"},this.state.list[this.state.focusIdx]+" "),t.params.map((function(t,n){return n+1===e.state.currentParam?r.a.createElement("span",{key:"param_".concat(n)},r.a.createElement("b",null," ",r.a.createElement("u",null,"[".concat(t.name,"]")))):r.a.createElement("span",{key:"param_".concat(n)}," [".concat(t.name,"]"))})),t.args.map((function(t,n){return t.name===e.state.currentParam?r.a.createElement("span",{key:"arg_".concat(t.name)},r.a.createElement("b",null,n?"|":" ",r.a.createElement("u",null,"".concat(t.name).concat(t.requireValue?"()":"")))):r.a.createElement("span",{key:"arg_".concat(t.name)},"".concat(n?"|":" ").concat(t.name).concat(t.requireValue?"()":""))}))),null===this.state.currentParam?null:r.a.createElement("div",{key:"cmd-descri"},r.a.createElement("small",null,r.a.createElement("i",null,t.description))),n?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{key:"paramDescr",style:{borderTop:"1px solid rgba(64, 172, 225, 0.5)",marginTop:"0.5em",padding:"0.2em 0 0.1em"}},r.a.createElement("small",null,n))):null):r.a.createElement("div",{key:"unknow",style:{color:"rgb(64,172,225)",border:"1px solid rgb(91,95,97)",borderBottom:"none",padding:"0.3em 0.7em",background:"rgb(26,29,33)",width:"32em"}},r.a.createElement("label",null,"Unknown command")),null===this.state.currentParam?r.a.createElement("div",{key:"list",style:{display:"flex",flexDirection:"column",color:"rgb(64,172,225)",fontWeight:"bold",border:"1px solid rgb(91,95,97)",background:"rgb(26,29,33)"}},this.state.list.map((function(t,n){return r.a.createElement("div",{key:n,style:{display:"flex"}},r.a.createElement("label",{key:"name",style:{display:"inline-block",padding:"0.3em 1em",width:"6em",background:n===e.state.focusIdx?"rgb(52,57,64)":""}},t),r.a.createElement("label",{key:"descri",style:{display:"inline-block",padding:"0.3em 1em",width:"24em",background:n===e.state.focusIdx?"rgb(52,57,64)":"",fontWeight:"normal"}},E[t].description))}))):null)}},{key:"componentDidMount",value:function(){n.currentRef=this}}]),n}(a.Component);D.currentRef=null;var j=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).containerID=void 0,a.history=void 0,a.historyIdx=void 0,a.historyLock=void 0,a.state={active:!1},a.containerID=Math.floor(1e6*Math.random()),a.history=[],a.historyIdx=-1,a.historyLock=!1,a}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"command-box-".concat(this.containerID),style:{display:this.state.active?"flex":"none",position:"absolute",bottom:"40px",left:0,width:"100vw",alignItems:"center",justifyContent:"center"},onKeyDown:function(e){e.stopPropagation()}},r.a.createElement("input",{className:"command-box",type:"text",spellCheck:"false",name:"command-input-".concat(this.containerID),onChange:function(t){e.parse(f()(t.target).val()),e.historyLock?e.historyLock=!1:e.historyIdx=-1},style:{border:"1px solid white",width:"calc(100vw - 200px)",minHeight:"1em",padding:"6px 12px"}}),r.a.createElement(D,null))}},{key:"componentDidMount",value:function(){var e=this;k("#command-box-".concat(this.containerID),!1),b("#command-box-".concat(this.containerID),["esc"],(function(){e.close()}),10),b("#command-box-".concat(this.containerID),["tab"],(function(){var t=D.getRef();if(t){var n=t.state.list[t.state.focusIdx];if(n){var a=f()("#command-box-".concat(e.containerID," input")).val().trimLeft();if(a.includes(" ")){var r=t.state.currentParam;if(null!==r){var o=function(e,t){var n={},a={},r=0,o=null,i=!1;return t.split(/ {1,}/).slice(1).forEach((function(t){var c=e.args.filter((function(e){return e.name===t}));c.length?(o=t,c[0].requireValue?i=!0:(a[o]=!0,i=!1)):o&&i?(a[o]=t,i=!1):e.params[r]&&(n[e.params[r].name]=t,r+=1,o=null)})),{getParam:function(e){return n[e]},getArgs:function(e){return a[e]}}}(E[n],a),i=function(){return[]},c="";"string"===typeof r?(i=E[n].args.filter((function(e){return e.name===r}))[0].autoComplete||i,c=o.getParam(r)||c):r-1<E[n].params.length&&(i=E[n].params[r-1].autoComplete||i,c=o.getParam(E[n].params[r-1].name)||c),i(c)}}else f()("#command-box-".concat(e.containerID," input")).val(n+" "),e.parse(n+" ")}}}),10),b("#command-box-".concat(this.containerID),["up"],(function(){var t=D.getRef();if(0!==f()("#command-box-".concat(e.containerID," input")).val().length&&-1===e.historyIdx||!e.history.length)t&&t.state.list.length&&t.setState({focusIdx:(t.state.list.length+t.state.focusIdx-1)%t.state.list.length});else{if(-1===e.historyIdx)e.historyIdx=e.history.length-1;else{if(!(e.historyIdx>=1))return;e.historyIdx-=1}var n=e.history[e.historyIdx];f()("#command-box-".concat(e.containerID," input")).val(n),e.parse(n),e.historyLock=!0}}),10),b("#command-box-".concat(this.containerID),["down"],(function(){var t=D.getRef();if(0!==f()("#command-box-".concat(e.containerID," input")).val().length&&-1===e.historyIdx||!e.history.length)t&&t.state.list.length&&t.setState({focusIdx:(t.state.focusIdx+1)%t.state.list.length});else if(-1!==e.historyIdx&&e.historyIdx<e.history.length-1){e.historyLock=!0,e.historyIdx+=1;var n=e.history[e.historyIdx];f()("#command-box-".concat(e.containerID," input")).val(n),e.parse(n)}}),10),b("#command-box-".concat(this.containerID),["enter"],(function(){e.run()}),10)}},{key:"componentDidUpdate",value:function(){this.state.active&&f()("#command-box-".concat(this.containerID," input")).val("").focus()}},{key:"componentWillUnmount",value:function(){D.hide(),x("#command-box-".concat(this.containerID),["esc"]),x("#command-box-".concat(this.containerID),["tab"]),x("#command-box-".concat(this.containerID),["up"]),x("#command-box-".concat(this.containerID),["down"]),x("#command-box-".concat(this.containerID),["enter"])}},{key:"create",value:function(){this.state.active||(f()("#command-box-".concat(this.containerID," input")).val(""),this.setState({active:!0}))}},{key:"close",value:function(){D.hide(),this.state.active&&(f()("#command-box-".concat(this.containerID," input")).val(""),this.setState({active:!1}))}},{key:"parse",value:function(e){e=e.trimLeft();var t=f()("#command-box-".concat(this.containerID," input")).offset();0!==e.replace(" ","").length?D.show(e,t.left,t.top):D.hide()}},{key:"run",value:function(){var e=f()("#command-box-".concat(this.containerID," input")).val();this.history=[].concat(Object(w.a)(this.history),[e]).slice(0,10),f()("#command-box-".concat(this.containerID," input")).val(""),this.parse("")}}]),n}(a.Component),O=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).newCommand=void 0,a.state={},a.newCommand=r.a.createRef(),a}return Object(l.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(d,null),r.a.createElement(j,{ref:this.newCommand}))}},{key:"componentDidMount",value:function(){var e=this;b("body",["ctrl","enter"],(function(){var t;null===(t=e.newCommand.current)||void 0===t||t.create()}),5)}},{key:"componentWillUnmount",value:function(){x("body",["ctrl","enter"])}}]),n}(a.Component);var R=function(){return r.a.createElement(O,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t,n){e.exports=n(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.a0e96495.chunk.js.map